{% include "header.html" %}
{% block title %}{% if is_edit %}Edit Post{% else %}New Post{% endif %}{% endblock %}

{% block content %}
<!-- Page Header -->
<header class="masthead" style="background-image: url('https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=1600')">
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-lg-8 mx-auto">
                <div class="site-heading">
                    <h1>{% if is_edit %}Edit Post{% else %}New Post{% endif %}</h1>
                    <span class="subheading">{% if is_edit %}Update your blog post{% else %}Create a new blog post{% endif %}</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="container">
    <div class="row">
        <div class="col-md-10 col-lg-8 mx-auto">
            <!-- WTForm for creating/editing blog posts -->
            <form method="POST" novalidate>
                {{ form.hidden_tag() }}
                
                <!-- Blog Post Title -->
                <div class="mb-3">
                    {{ form.title.label(class="form-label") }}
                    {{ form.title(class="form-control", placeholder="Enter blog post title") }}
                    {% if form.title.errors %}
                        <div class="text-danger">
                            {% for error in form.title.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Subtitle -->
                <div class="mb-3">
                    {{ form.subtitle.label(class="form-label") }}
                    {{ form.subtitle(class="form-control", placeholder="Enter subtitle") }}
                    {% if form.subtitle.errors %}
                        <div class="text-danger">
                            {% for error in form.subtitle.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Author Name -->
                <div class="mb-3">
                    {{ form.author.label(class="form-label") }}
                    {{ form.author(class="form-control", placeholder="Enter your name") }}
                    {% if form.author.errors %}
                        <div class="text-danger">
                            {% for error in form.author.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Blog Image URL -->
                <div class="mb-3">
                    {{ form.img_url.label(class="form-label") }}
                    {{ form.img_url(class="form-control", placeholder="Enter image URL (e.g., https://unsplash.com/...)") }}
                    {% if form.img_url.errors %}
                        <div class="text-danger">
                            {% for error in form.img_url.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Blog Content (CKEditor) -->
                <div class="mb-3">
                    {{ form.body.label(class="form-label") }}
                    {{ form.body(class="form-control") }}
                    {{ ckeditor.config(name='body') }}
                    {% if form.body.errors %}
                        <div class="text-danger">
                            {% for error in form.body.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Submit Button -->
                <div class="d-grid gap-2">
                    {{ form.submit(class="btn btn-primary btn-lg") }}
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
